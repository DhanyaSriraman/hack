{"ast":null,"code":"import _toConsumableArray from\"D:/shna/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/shna/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/shna/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\shna\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import User from\"../Assets/User.svg\";import Response from\"./Response.js\";import Input from\"./Input\";import darkmode from\"../Assets/darkmode.svg\";import Switch from\"react-switch\";import Dictaphone from\"./Dictaphone\";import Send from\"../Assets/send.svg\";import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var conversations={\"conversation\":[{\"chat_id\":1,\"user_msg\":\"What is wikipedia\",\"ai_msg\":\"Wikipedia is an online encyclopedia that is maintained by volunteers and dedicated to providing free, up-to-date information on various subjects. It contains articles on various topics from around the world, as well as photographs, maps, and other multimedia resources. Wikipedia aims to provide a wide range of knowledge on various subjects in order to help people learn and understand complex ideas. It is one of the most popular and widely used encyclopedias in the world today.\"},{\"chat_id\":2,\"user_msg\":\"tell me about Google-search\",\"ai_msg\":\"Google Search is an online search engine that allows users to search for information, images, and videos from the internet using keywords in their queries. The search engine works by processing user input, comparing it to the available results on the web, and returning relevant results to the user.\\nTo use Google Search, you can simply type your query into the search box or click on the \\\"Search\\\" button in the toolbar above your screen. The search engine will then display a list of websites related to your query,\"},{\"chat_id\":3,\"user_msg\":\"tell me about Java\",\"ai_msg\":\"Java is an open-source programming language developed by Sun Microsystems in 1995. It was designed to be platform-independent and can run on any operating system, including Windows, Linux, macOS, and Android.\\nJava is widely used for building web applications, enterprise software, mobile apps, and other types of software that require a large amount of processing power. It has gained popularity due to its simplicity, flexibility, and wide range of libraries and frameworks available for developing desktop and web applications.\\nOne of\"},{\"chat_id\":4,\"user_msg\":\"tell me about python\",\"ai_msg\":\"Python is a high-level, interpreted programming language that was designed to be easy for beginners and experienced programmers alike. It was created by Guido van Rossum in 1991 and has since become one of the most widely used languages in the world.\\nPython has a wide range of applications, including web development, data analysis, artificial intelligence, game development, and more. It supports multiple programming paradigms, such as procedural, object-oriented, and functional programming, which allows developers to write\"}]};function Threads(){console.log(\"In threads\");var _useParams=useParams(),id=_useParams.id;var _useParams2=useParams(),user_id=_useParams2.user_id;console.log(user_id,\"User Id\");console.log(\"Conversation ID:\",id);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setchecked=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setinput=_useState4[1];var _useState5=useState(input),_useState6=_slicedToArray(_useState5,2),msg=_useState6[0],setmsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),typing=_useState8[0],settyping=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),messages=_useState10[0],setMessages=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),language=_useState12[0],setLanguage=_useState12[1];var newChat={user_id:user_id,created_at:Math.floor(Date.now()/1000)};var newChatString=JSON.stringify(newChat);console.log(newChatString);useEffect(function(){if(id!==undefined){console.log(\"Hey in threads fetch\");var fetchConversation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var parsedId,response,parsedMessages;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;parsedId=parseInt(id);_context.next=4;return axios.get(\"https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv/\".concat(parsedId,\"/chat/history\"));case 4:response=_context.sent;parsedMessages=response.data.conversation.map(function(_ref2){var chat_id=_ref2.chat_id,user_msg=_ref2.user_msg,ai_msg=_ref2.ai_msg;return{chat_id:chat_id,input:user_msg,res:ai_msg};});setMessages(parsedMessages);// const conversation = response.data.conversation\n// if (conversation) {\n// }\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error('Error fetching conversation:',_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchConversation(){return _ref.apply(this,arguments);};}();fetchConversation();// const conversation = conversations.conversation.find(conv => conv.chat_id === parseInt(id));\n// if (conversation) {\n//   setMessages([{ input: conversation.user_msg, res: conversation.ai_msg }]);\n// }\n}else{setMessages([]);var getConvId=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var idRes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv\",newChat);case 3:idRes=_context2.sent;console.log(idRes);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('Error fetching conversation:',_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getConvId(){return _ref3.apply(this,arguments);};}();getConvId();}},[id]);var handleClick=function handleClick(){setchecked(!checked);};var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var parsedId,msg,msgString,response1,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:parsedId=parseInt(id);e.preventDefault();console.log(input+\" heyyyy input\");msg={conv_id:parsedId,user_msg:input,doc_name:\"java\"};msgString=JSON.stringify(msg);console.log(msgString);_context3.next=8;return axios.post(\"https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv/chat\",msg);case 8:response1=_context3.sent;console.log(response1);_context3.next=12;return axios.post(\"http://127.0.0.1:5000/api\",{msg:input,language:language});case 12:response=_context3.sent;setMessages([].concat(_toConsumableArray(messages),[{input:input,res:response1.data.response}]));setinput(\"\");case 15:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSubmit(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#A9BA9D] w-[100vw] h-[100vh]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-between h-[98vh]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#222222] flex mx-2 p-1 mt-4 px-2 rounded-2xl text-white justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex p-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:User,className:\"w-10 mx-2\",alt:\"User\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"Matsya Chatbot\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-y-scroll h-[75vh] py-2 px-4 scrollbar scrollbar-thumb-gray-900 scrollbar-h-[2vh] \",children:[/*#__PURE__*/_jsx(Response,{msg:\"Welcome to Matsya.You can chat in: English or \\u0BA4\\u0BAE\\u0BBF\\u0BB4\\u0BCD or \\u0939\\u093F\\u0902\\u0926\\u0940\"}),messages.map(function(res,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"py-2 pl-4\",children:[/*#__PURE__*/_jsx(Input,{msg:res.input}),/*#__PURE__*/_jsx(Response,{msg:res.res})]},index);})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"mx-2 bg-[#222222] flex justify-between w-[80vw] px-4 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(\"input\",{onFocus:function onFocus(){return settyping(true);},autoFocus:true,value:input,type:\"text\",placeholder:\"Type your query...\",className:\"px-4 w-[60vw] h-[7vh] bg-[#222222] rounded-lg  text-white focus:outline-none focus:border-none\",onChange:function onChange(e){setinput(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"mx-0\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Send\",src:Send,className:\"text-white w-[4.5vw] h-[4.5vh] justify-center cursor-pointer mt-0.7 ml-2\"})}),/*#__PURE__*/_jsx(Dictaphone,{input:input,setinput:setinput,language:language,setLanguage:setLanguage,className:\"cursor-pointer px-0\"})]})]})]})});}export default Threads;// import React, { useState, useEffect } from \"react\";\n// import User from \"../Assets/User.svg\";\n// import Response from \"./Response.js\";\n// import Input from \"./Input\";\n// import darkmode from \"../Assets/darkmode.svg\";\n// import Switch from \"react-switch\";\n// import Dictaphone from \"./Dictaphone\";\n// import Send from \"../Assets/send.svg\";\n// function Threads() {\n//   const [checked, setchecked] = useState(false);\n//   const [input, setinput] = useState(\"\");\n//   const [msg, setmsg] = useState(input);\n//   const [typing, settyping] = useState(false);\n//   const [messages, setMessages] = useState([]);\n//   const handleClick = () => {\n//     if (checked) {\n//       setchecked(false);\n//     } else {\n//       setchecked(true);\n//     }\n//   };\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     const response = await axios.post(\"http://127.0.0.1:5000/api\", { msg: input });\n//     setMessages([...messages, { input: input, res: response.data }]);\n//     setinput(\"\");\n//   };\n//   console.log(msg);\n//   useEffect(() => {}, [msg]);\n//   return (\n//     <div className=\"flex flex-col justify-between h-[98vh]\">\n//       <div className=\"bg-[#222222] flex mx-2 p-1 mt-4 px-2 rounded-2xl text-white justify-between\">\n//         <div className=\"flex p-2\">\n//           <img src={User} className=\"w-10 mx-2\" alt=\"User\" />\n//           <div>\n//             <p>Vakil Bot</p>\n//             <p className=\"text-xs\">@legal.ly</p>\n//           </div>\n//         </div>\n//         <div className=\"flex justify-end p-4\">\n//           <img src={darkmode} className=\"px-4\" />\n//           <Switch\n//             onChange={handleClick}\n//             checked={checked}\n//             onColor={\"#FFE600\"}\n//             handleDiameter={30}\n//             uncheckedIcon={false}\n//             checkedIcon={false}\n//             boxShadow=\"0px 1px 5px rgba(0, 0, 0, 0.6)\"\n//             activeBoxShadow=\"0px 0px 1px 10px rgba(0, 0, 0, 0.2)\"\n//             height={20}\n//             width={48}\n//             className=\"react-switch\"\n//             id=\"material-switch\"\n//           />\n//         </div>\n//       </div>\n//       {/* Message Area */}\n//       <div className=\"overflow-y-scroll h-[75vh] py-2 px-4 scrollbar scrollbar-thumb-gray-900 scrollbar-h-[2vh] \">\n//         <Response msg=\"Hello how may I help you?\" />\n//         {messages.map((res) => (\n//           <div className=\"py-2 pl-4\">\n//             <Input msg={res.input} />\n//             <Response msg={res.res} />\n//           </div>\n//         ))}\n//         {typing && (\n//           <div className=\"px-4 w-fit p-3 h-fit bg-[#494949] ml-auto mr-16 rounded-lg text-center text-sm text-white rounded-br-none align-right \">\n//             Typing ...\n//           </div>\n//         )}\n//       </div>\n//       <form\n//         onSubmit={(e) => {\n//           e.preventDefault();\n//           setMessages([\n//             ...messages,\n//             {\n//               input: input,\n//               res: \"Yes Hello\",\n//             },\n//           ]);\n//           setinput(\"\");\n//           settyping(false);\n//         }}\n//         className=\"mx-2 bg-[#222222] flex justify-between w-[80vw] px-4 py-2 rounded-lg\"\n//       >\n//         <input\n//           onFocus={() => settyping(true)}\n//           autoFocus\n//           value={input}\n//           type=\"text\"\n//           placeholder=\"Type your query...\"\n//           className=\"px-4 w-[60vw] h-[7vh] bg-[#222222] rounded-lg  text-white focus:outline-none focus:border-none\"\n//           onChange={(e) => {\n//             setinput(e.target.value);\n//           }}\n//         />\n//         <div className=\"flex\">\n//           <button type=\"submit\" className=\"mx-0\">\n//             <img\n//               alt=\"Send\"\n//               src={Send}\n//               className=\"text-white w-[4.5vw] h-[4.5vh] justify-center cursor-pointer mt-0.7 ml-2\"\n//             />\n//           </button>\n//           <Dictaphone\n//             input={input}\n//             setinput={setinput}\n//             className=\"cursor-pointer px-0\"\n//           />\n//         </div>\n//       </form>\n//     </div>\n//   );\n// }\n// export default Threads;","map":{"version":3,"sources":["D:/shna/src/Components/Threads.js"],"names":["React","useState","useEffect","axios","User","Response","Input","darkmode","Switch","Dictaphone","Send","useParams","conversations","Threads","console","log","id","user_id","checked","setchecked","input","setinput","msg","setmsg","typing","settyping","messages","setMessages","language","setLanguage","newChat","created_at","Math","floor","Date","now","newChatString","JSON","stringify","undefined","fetchConversation","parsedId","parseInt","get","response","parsedMessages","data","conversation","map","chat_id","user_msg","ai_msg","res","error","getConvId","post","idRes","handleClick","handleSubmit","e","preventDefault","conv_id","doc_name","msgString","response1","index","target","value"],"mappings":"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Z,aAAiB,SAAS,CAAC,WAA3B,wBACE,KAAC,KAAD,EAAO,GAAG,CAAEb,GAAG,CAAChC,KAAhB,EADF,cAEE,KAAC,QAAD,EAAU,GAAG,CAAEgC,GAAG,CAACA,GAAnB,EAFF,GAAUa,KAAV,CADY,EAAb,CAFH,GA3BF,cAqCE,cACE,QAAQ,CAAEP,YADZ,CAEE,SAAS,CAAC,sEAFZ,wBAIE,cACE,OAAO,CAAE,yBAAMjC,CAAAA,SAAS,CAAC,IAAD,CAAf,EADX,CAEE,SAAS,KAFX,CAGE,KAAK,CAAEL,KAHT,CAIE,IAAI,CAAC,MAJP,CAKE,WAAW,CAAC,oBALd,CAME,SAAS,CAAC,gGANZ,CAOE,QAAQ,CAAE,kBAACuC,CAAD,CAAO,CACftC,QAAQ,CAACsC,CAAC,CAACO,MAAF,CAASC,KAAV,CAAR,CACD,CATH,EAJF,cAeE,aAAK,SAAS,CAAC,MAAf,wBACE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,MAAhC,uBACE,YACE,GAAG,CAAC,MADN,CAEE,GAAG,CAAEzD,IAFP,CAGE,SAAS,CAAC,0EAHZ,EADF,EADF,cAQE,KAAC,UAAD,EACE,KAAK,CAAEU,KADT,CAEE,QAAQ,CAAEC,QAFZ,CAGE,QAAQ,CAAEO,QAHZ,CAIE,WAAW,CAAEC,WAJf,CAKE,SAAS,CAAC,qBALZ,EARF,GAfF,GArCF,GADA,EADF,CA0ED,CAED,cAAehB,CAAAA,OAAf,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport User from \"../Assets/User.svg\";\r\nimport Response from \"./Response.js\";\r\nimport Input from \"./Input\";\r\nimport darkmode from \"../Assets/darkmode.svg\";\r\nimport Switch from \"react-switch\";\r\nimport Dictaphone from \"./Dictaphone\";\r\nimport Send from \"../Assets/send.svg\";\r\nimport { useParams } from 'react-router-dom';\r\nconst conversations ={\r\n  \"conversation\": [\r\n      {\r\n          \"chat_id\": 1,\r\n          \"user_msg\": \"What is wikipedia\",\r\n          \"ai_msg\": \"Wikipedia is an online encyclopedia that is maintained by volunteers and dedicated to providing free, up-to-date information on various subjects. It contains articles on various topics from around the world, as well as photographs, maps, and other multimedia resources. Wikipedia aims to provide a wide range of knowledge on various subjects in order to help people learn and understand complex ideas. It is one of the most popular and widely used encyclopedias in the world today.\"\r\n      },\r\n      {\r\n          \"chat_id\": 2,\r\n          \"user_msg\": \"tell me about Google-search\",\r\n          \"ai_msg\": \"Google Search is an online search engine that allows users to search for information, images, and videos from the internet using keywords in their queries. The search engine works by processing user input, comparing it to the available results on the web, and returning relevant results to the user.\\nTo use Google Search, you can simply type your query into the search box or click on the \\\"Search\\\" button in the toolbar above your screen. The search engine will then display a list of websites related to your query,\"\r\n      },\r\n      {\r\n          \"chat_id\": 3,\r\n          \"user_msg\": \"tell me about Java\",\r\n          \"ai_msg\": \"Java is an open-source programming language developed by Sun Microsystems in 1995. It was designed to be platform-independent and can run on any operating system, including Windows, Linux, macOS, and Android.\\nJava is widely used for building web applications, enterprise software, mobile apps, and other types of software that require a large amount of processing power. It has gained popularity due to its simplicity, flexibility, and wide range of libraries and frameworks available for developing desktop and web applications.\\nOne of\"\r\n      },\r\n      {\r\n          \"chat_id\": 4,\r\n          \"user_msg\": \"tell me about python\",\r\n          \"ai_msg\": \"Python is a high-level, interpreted programming language that was designed to be easy for beginners and experienced programmers alike. It was created by Guido van Rossum in 1991 and has since become one of the most widely used languages in the world.\\nPython has a wide range of applications, including web development, data analysis, artificial intelligence, game development, and more. It supports multiple programming paradigms, such as procedural, object-oriented, and functional programming, which allows developers to write\"\r\n      }\r\n  ]\r\n}\r\nfunction Threads() {\r\n  console.log(\"In threads\")\r\n  const { id } = useParams();\r\n  const{ user_id }= useParams();\r\n  console.log(user_id,\"User Id\")\r\n  console.log(\"Conversation ID:\", id);\r\n  const [checked, setchecked] = useState(false);\r\n  const [input, setinput] = useState(\"\");\r\n  const [msg, setmsg] = useState(input);\r\n  const [typing, settyping] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [language, setLanguage] = useState(\"\"); \r\n  const newChat = {\r\n    user_id: user_id,\r\n    created_at : Math.floor(Date.now() / 1000)\r\n  }\r\n  const newChatString= JSON.stringify(newChat);\r\n  console.log(newChatString)\r\n  useEffect(() => {\r\n    if (id !== undefined) {\r\n      console.log(\"Hey in threads fetch\")\r\n      const fetchConversation = async () => {\r\n        try {\r\n          const parsedId = parseInt(id);\r\n          const response = await axios.get(`https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv/${parsedId}/chat/history`);\r\n          const parsedMessages = response.data.conversation.map(({ chat_id, user_msg, ai_msg }) => ({ chat_id, input: user_msg, res: ai_msg }));\r\n          setMessages(parsedMessages);\r\n          // const conversation = response.data.conversation\r\n          // if (conversation) {\r\n           \r\n          // }\r\n        } catch (error) {\r\n          console.error('Error fetching conversation:', error);\r\n        }\r\n      };\r\n  \r\n      fetchConversation();\r\n      // const conversation = conversations.conversation.find(conv => conv.chat_id === parseInt(id));\r\n      // if (conversation) {\r\n      //   setMessages([{ input: conversation.user_msg, res: conversation.ai_msg }]);\r\n      // }\r\n    }else {\r\n      setMessages([]);\r\n      const getConvId = async () => {\r\n        try{\r\n          const idRes = await axios.post(\"https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv\", newChat);\r\n          console.log(idRes)\r\n        }catch(error){\r\n          console.error('Error fetching conversation:', error);\r\n        }\r\n      };\r\n      getConvId();\r\n    }\r\n  }, [id]);\r\n\r\n  const handleClick = () => {\r\n    setchecked(!checked);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    const parsedId = parseInt(id);\r\n    e.preventDefault();\r\n    console.log(input+\" heyyyy input\")\r\n    const msg = {\r\n      conv_id: parsedId,\r\n      user_msg: input,\r\n      doc_name : \"java\"\r\n  };\r\n  const msgString = JSON.stringify(msg);\r\n  console.log(msgString);\r\n    const response1 = await axios.post(\"https://p9v82c8s-8000.inc1.devtunnels.ms/v1/conv/chat\", msg);\r\n    console.log(response1)\r\n    const response = await axios.post(\"http://127.0.0.1:5000/api\", { msg: input ,language: language});\r\n    setMessages([...messages, { input: input, res: response1.data.response }]);\r\n    setinput(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#A9BA9D] w-[100vw] h-[100vh]\">\r\n    <div className=\"flex flex-col justify-between h-[98vh]\">\r\n      <div className=\"bg-[#222222] flex mx-2 p-1 mt-4 px-2 rounded-2xl text-white justify-between\">\r\n        <div className=\"flex p-2\">\r\n          <img src={User} className=\"w-10 mx-2\" alt=\"User\" />\r\n          <div>\r\n            <p>Matsya Chatbot</p>\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"flex justify-end p-4\">\r\n          <img src={darkmode} className=\"px-4\" />\r\n          <Switch\r\n            onChange={handleClick}\r\n            checked={checked}\r\n            onColor={\"#FFE600\"}\r\n            handleDiameter={30}\r\n            uncheckedIcon={false}\r\n            checkedIcon={false}\r\n            boxShadow=\"0px 1px 5px rgba(0, 0, 0, 0.6)\"\r\n            activeBoxShadow=\"0px 0px 1px 10px rgba(0, 0, 0, 0.2)\"\r\n            height={20}\r\n            width={48}\r\n            className=\"react-switch\"\r\n            id=\"material-switch\"\r\n          />\r\n        </div> */}\r\n      </div>\r\n      {/* Message Area */}\r\n      <div className=\"overflow-y-scroll h-[75vh] py-2 px-4 scrollbar scrollbar-thumb-gray-900 scrollbar-h-[2vh] \">\r\n      <Response msg=\"Welcome to Matsya.You can chat in: English or தமிழ் or हिंदी\" />\r\n        {messages.map((res, index) => (\r\n          <div key={index} className=\"py-2 pl-4\">\r\n            <Input msg={res.input} />\r\n            <Response msg={res.res} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"mx-2 bg-[#222222] flex justify-between w-[80vw] px-4 py-2 rounded-lg\"\r\n      >\r\n        <input\r\n          onFocus={() => settyping(true)}\r\n          autoFocus\r\n          value={input}\r\n          type=\"text\"\r\n          placeholder=\"Type your query...\"\r\n          className=\"px-4 w-[60vw] h-[7vh] bg-[#222222] rounded-lg  text-white focus:outline-none focus:border-none\"\r\n          onChange={(e) => {\r\n            setinput(e.target.value);\r\n          }}\r\n        />\r\n        <div className=\"flex\">\r\n          <button type=\"submit\" className=\"mx-0\">\r\n            <img\r\n              alt=\"Send\"\r\n              src={Send}\r\n              className=\"text-white w-[4.5vw] h-[4.5vh] justify-center cursor-pointer mt-0.7 ml-2\"\r\n            />\r\n          </button>\r\n          <Dictaphone\r\n            input={input}\r\n            setinput={setinput}\r\n            language={language}\r\n            setLanguage={setLanguage}\r\n            className=\"cursor-pointer px-0\"\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Threads;\r\n\r\n\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import User from \"../Assets/User.svg\";\r\n// import Response from \"./Response.js\";\r\n// import Input from \"./Input\";\r\n// import darkmode from \"../Assets/darkmode.svg\";\r\n// import Switch from \"react-switch\";\r\n// import Dictaphone from \"./Dictaphone\";\r\n// import Send from \"../Assets/send.svg\";\r\n\r\n// function Threads() {\r\n//   const [checked, setchecked] = useState(false);\r\n//   const [input, setinput] = useState(\"\");\r\n//   const [msg, setmsg] = useState(input);\r\n//   const [typing, settyping] = useState(false);\r\n//   const [messages, setMessages] = useState([]);\r\n\r\n//   const handleClick = () => {\r\n//     if (checked) {\r\n//       setchecked(false);\r\n//     } else {\r\n//       setchecked(true);\r\n//     }\r\n//   };\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     const response = await axios.post(\"http://127.0.0.1:5000/api\", { msg: input });\r\n//     setMessages([...messages, { input: input, res: response.data }]);\r\n//     setinput(\"\");\r\n//   };\r\n//   console.log(msg);\r\n//   useEffect(() => {}, [msg]);\r\n//   return (\r\n//     <div className=\"flex flex-col justify-between h-[98vh]\">\r\n//       <div className=\"bg-[#222222] flex mx-2 p-1 mt-4 px-2 rounded-2xl text-white justify-between\">\r\n//         <div className=\"flex p-2\">\r\n//           <img src={User} className=\"w-10 mx-2\" alt=\"User\" />\r\n//           <div>\r\n//             <p>Vakil Bot</p>\r\n//             <p className=\"text-xs\">@legal.ly</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"flex justify-end p-4\">\r\n//           <img src={darkmode} className=\"px-4\" />\r\n//           <Switch\r\n//             onChange={handleClick}\r\n//             checked={checked}\r\n//             onColor={\"#FFE600\"}\r\n//             handleDiameter={30}\r\n//             uncheckedIcon={false}\r\n//             checkedIcon={false}\r\n//             boxShadow=\"0px 1px 5px rgba(0, 0, 0, 0.6)\"\r\n//             activeBoxShadow=\"0px 0px 1px 10px rgba(0, 0, 0, 0.2)\"\r\n//             height={20}\r\n//             width={48}\r\n//             className=\"react-switch\"\r\n//             id=\"material-switch\"\r\n//           />\r\n//         </div>\r\n//       </div>\r\n//       {/* Message Area */}\r\n//       <div className=\"overflow-y-scroll h-[75vh] py-2 px-4 scrollbar scrollbar-thumb-gray-900 scrollbar-h-[2vh] \">\r\n//         <Response msg=\"Hello how may I help you?\" />\r\n\r\n//         {messages.map((res) => (\r\n//           <div className=\"py-2 pl-4\">\r\n//             <Input msg={res.input} />\r\n//             <Response msg={res.res} />\r\n//           </div>\r\n//         ))}\r\n//         {typing && (\r\n//           <div className=\"px-4 w-fit p-3 h-fit bg-[#494949] ml-auto mr-16 rounded-lg text-center text-sm text-white rounded-br-none align-right \">\r\n//             Typing ...\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       <form\r\n//         onSubmit={(e) => {\r\n//           e.preventDefault();\r\n//           setMessages([\r\n//             ...messages,\r\n//             {\r\n//               input: input,\r\n//               res: \"Yes Hello\",\r\n//             },\r\n//           ]);\r\n//           setinput(\"\");\r\n//           settyping(false);\r\n//         }}\r\n//         className=\"mx-2 bg-[#222222] flex justify-between w-[80vw] px-4 py-2 rounded-lg\"\r\n//       >\r\n//         <input\r\n//           onFocus={() => settyping(true)}\r\n//           autoFocus\r\n//           value={input}\r\n//           type=\"text\"\r\n//           placeholder=\"Type your query...\"\r\n//           className=\"px-4 w-[60vw] h-[7vh] bg-[#222222] rounded-lg  text-white focus:outline-none focus:border-none\"\r\n//           onChange={(e) => {\r\n//             setinput(e.target.value);\r\n//           }}\r\n//         />\r\n//         <div className=\"flex\">\r\n//           <button type=\"submit\" className=\"mx-0\">\r\n//             <img\r\n//               alt=\"Send\"\r\n//               src={Send}\r\n//               className=\"text-white w-[4.5vw] h-[4.5vh] justify-center cursor-pointer mt-0.7 ml-2\"\r\n//             />\r\n//           </button>\r\n//           <Dictaphone\r\n//             input={input}\r\n//             setinput={setinput}\r\n//             className=\"cursor-pointer px-0\"\r\n//           />\r\n//         </div>\r\n//       </form>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Threads;"]},"metadata":{},"sourceType":"module"}